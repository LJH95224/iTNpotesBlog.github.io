(window.webpackJsonp=window.webpackJsonp||[]).push([[183],{536:function(n,t,e){"use strict";e.r(t);var a=e(42),s=Object(a.a)({},(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[e("h1",{attrs:{id:"状态管理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#状态管理"}},[n._v("#")]),n._v(" 状态管理")]),n._v(" "),e("blockquote",[e("p",[e("strong",[n._v("课程主要内容")]),e("br"),n._v("\n1、 Bus "),e("br"),n._v("\n2、 Vuex-基础-state&getters "),e("br"),n._v("\n3、 Vuex-基础-mutation&action/module "),e("br"),n._v("\n4、 Vuex-进阶 "),e("br")])]),n._v(" "),e("p",[n._v("一般在项目中，使用状态管理，使用的是vue官方提供的vuex。它适合于比较大型复杂的项目，当我们的多组件之间共享的变得非常复杂的时候使用vuex。当项目是一个比较简单的项目的时候，可以使用bus，来满足需求")]),n._v(" "),e("h2",{attrs:{id:"父子组件传值"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#父子组件传值"}},[n._v("#")]),n._v(" 父子组件传值")]),n._v(" "),e("p",[n._v("1、 新建一个store页面, 然后再路由中注册")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("store在路由中注册\n  {\n    path: '/store',\n    component: () => import('@/views/store.vue')\n  },\n\n")])])]),e("p",[n._v("2、 在 components 里面新建一个组件 AInput.vue。AInput.vue里面有一个input标签，给标签绑定一个input事件")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("AInput.vue:\n\n<template>\n  <input @input=\"handleInput\" :value=\"value\" />\n</template>\n<script>\nexport default {\n  name: 'AInput',\n  props: {\n    value: {\n      type: [String, Number],\n      default: ''\n    }\n  },\n  methods: {\n    handleInput (event) {\n      // 获取文本框中value的值\n      const value = event.target.value\n      // 将编辑后的值，使用事件将value推出去\n      this.$emit('input', value)\n    }\n  }\n}\n<\/script>\n")])])]),e("p",[n._v("3、在store.vue中使用AInput组件，首先 将组件引进来 ，然后")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("<template>\n  <div>\n    <p>这是store页面</p>\n    \n    <a-input v-model=\"inputValue\"></a-input>\n    <p>{{ inputValue }}</p>\n  </div>\n</template>\n // _c 我们之前在vue.config.js中定义了 该符号表示components文件夹路径\nimport AInput from '_c/AInput'\nexport default {\n  name: 'store',\n  data () {\n    return {\n      inputValue: ''\n    }\n  },\n  components: {\n      AInput\n  }\n}\n")])])]),e("p",[n._v("4、 运行效果\n"),e("img",{attrs:{src:"A651A84A5C7C4D53A8F62EC37F8B9E08",alt:"image"}})]),n._v(" "),e("p",[n._v("5、 解析代码：\nv-model这个指令是一个双向绑定，直接绑定一个值，然后再组件内需要入下实现")]),n._v(" "),e("p",[n._v("首先，在AInput组件中，绑定一个input事件，当input里面的值输入修改的话，会触发事件input事件，从而执行 handleInput 方法。 input里面值的显示是通过value属性进行设置，显示的值是value的值。")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v('\x3c!--v-model其实是一个语法糖--\x3e\n<a-input v-model="inputValue"></a-input>\n\x3c!-- 上面那种写法是下面这种写法的简写方法 --\x3e\n<a-input :value="inputValue" @input="handleInput"></a-input>\n\x3c!--下面这种写法，需要自己写一个handleInput方法--\x3e\nmethods: {\n    handleInput (val) {\n        this.inputValue = val\n    }\n}\n\n')])])]),e("h2",{attrs:{id:"兄弟组件传值"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#兄弟组件传值"}},[n._v("#")]),n._v(" 兄弟组件传值")]),n._v(" "),e("p",[n._v("兄弟组件的传值分为两种，一种是有相同的父级，可以通过父级进行传值，另一种就是没有相同的父级，但是我们可以通过bus传值")]),n._v(" "),e("h3",{attrs:{id:"兄弟组件-有相同的父组件传值"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#兄弟组件-有相同的父组件传值"}},[n._v("#")]),n._v(" 兄弟组件-有相同的父组件传值")]),n._v(" "),e("p",[n._v("创建一个AShow组件")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("<template>\n  <div>\n    <p>AShow: {{ content }} </p>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    content: {\n      type: [String, Number],\n      default: ''\n    }\n  }\n}\n")])])]),e("p",[n._v("在store.vue里面引入代码")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("<template>\n  <div>\n    <p>这是store页面</p>\n    <a-input @input=\"handleInput\"></a-input>\n    <a-show :content=\"inputValue\"></a-show>\n  </div>\n</template>\n // _c 我们之前在vue.config.js中定义了 该符号表示components文件夹路径\nimport AInput from '_c/AInput'\nimport AShow from '_c/AShow'\nexport default {\n  name: 'store',\n  data () {\n    return {\n      inputValue: ''\n    }\n  },\n  components: {\n      AInput,\n      AShow\n  },\n  methods: {\n      handleInput (val) {\n          this.inputValue = val\n      }\n  }\n}\n")])])]),e("p",[n._v("效果展示：\n"),e("img",{attrs:{src:"7FE38A35E4ED490AB0372FEFC5B8ADE7",alt:"image"}})]),n._v(" "),e("p",[n._v("可以看到在AInput上面触发的事件， 在父组件中给子组件绑定input事件（方法：handleInput），当input事件触发之后，将传过来的值赋值给 inputValue；这个值再传给 "),e("a-show",[n._v(" 中的content属性。")])],1),n._v(" "),e("h3",{attrs:{id:"兄弟组件-没有相同的父组件传值"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#兄弟组件-没有相同的父组件传值"}},[n._v("#")]),n._v(" 兄弟组件-没有相同的父组件传值")]),n._v(" "),e("p",[n._v("跨文件的两个属性是如何通信的，之前我们定义了 tel组件 和 email组件，他们相当于两个页面组件，我们在 app.vue 里面使用了两个命名视图")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v('<router-view key="email" name="email" />\n<router-view key="tel" name="tel" />\n')])])]),e("p",[n._v("他们两个通信如果想通信的话，就需要用到bus，这种简单场景下，就可以用bus")]),n._v(" "),e("p",[n._v("在src文件夹 -> lib文件夹里面创建一个bus.js")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("// 引入vue\nimport Vue from 'vue'\n// 创建一个bus实例\nconst Bus = new Vue()\n// 将bus导出\nexport default Bus\n")])])]),e("p",[n._v("创建好 bus 之后， 在main.js里面我们把 bus 引入")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("import Bus from './lib/bus'\n")])])]),e("p",[n._v("把bus注册到根实例里面")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("Vue.prototype.$bus = Bus\n")])])]),e("p",[n._v("在email.vue 这个组件里面")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("<template>\n  <div class=\"email\"> \n    // 定义一个按钮，绑定一个click事件，定义handleClick方法\n    <button @click=\"handleClick\">按我</button>\n  </div>\n</template>\n<script>\nexport default {\n  methods: {\n    handleClick () {\n      // 把on-click事件提交给bus\n      this.$bus.$emit('on-click', 'hello')\n    }\n  },\n  // 生命周期钩子\n  mounted () {\n    // 查看有没有注册成功bus\n    console.log(this.$bus)\n  }\n}\n<\/script>\n<style scoped>\n.email {\n  border: 1px solid green;\n}\n</style>\n")])])]),e("p",[n._v("在tel 里面，接受email.vue组件里面穿过来的事件")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("<template>\n  <div class=\"tel\">\n    <p>{{ message }}</p>\n  </div>\n</template>\n<script>\nexport default {\n  data () {\n    return {\n      message: ''\n    }\n  },\n  mounted () {\n    // 给bus添加一个事件监听， 监听on-click事件\n    this.$bus.$on('on-click', (mes) => {\n      this.message = mes\n    })\n  }\n}\n<\/script>\n<style scoped>\n.tel{\n  border: 1px solid red;\n}\n</style>\n")])])]),e("p",[n._v("原理：\n$emit()这个方法，可以触发当前实例上的一些事件\n$on() 这个方法，给当前事件，绑定一个事件监听。")]),n._v(" "),e("p",[n._v("我们的on-click事件，是绑定在this.$bus 这个vue实例上，所以我们在this.$bus实例上监听这个on-click响应事件, 这样就可以有一个响应了。")]),n._v(" "),e("p",[n._v("如果我们在email组件中")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("<template>\n  <div class=\"email\"> \n    // 定义一个按钮，绑定一个click事件，定义handleClick方法\n    <button @click=\"handleClick\">按我</button>\n  </div>\n</template>\n<script>\nexport default {\n  methods: {\n    handleClick () {\n      // 把on-click事件提交给this\n      this.$emit('on-click', 'hello')\n    }\n  },\n  // 生命周期钩子\n  mounted () {\n    // 查看有没有注册成功bus\n    console.log(this.$bus)\n    // 在这里监听on-click事件\n    this.$on('on-click', (mes) => {\n      console.log(mes)\n    })\n  }\n}\n<\/script>\n<style scoped>\n.email {\n  border: 1px solid green;\n}\n</style>\n")])])]),e("p",[n._v("效果：在当前组件上，绑定一个 on-click 事件，也在当前组件内监听一个 on-click事件\n"),e("img",{attrs:{src:"E4A01019F9334D84A4298BF82252E440",alt:"image"}})])])}),[],!1,null,null,null);t.default=s.exports}}]);