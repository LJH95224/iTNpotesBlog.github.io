(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{501:function(t,a,s){"use strict";s.r(a);var e=s(42),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"vue面试题汇总篇"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue面试题汇总篇"}},[t._v("#")]),t._v(" vue面试题汇总篇")]),t._v(" "),s("h3",{attrs:{id:"_1、讲一讲mvvm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、讲一讲mvvm"}},[t._v("#")]),t._v(" 1、讲一讲MVVM")]),t._v(" "),s("p",[t._v("MVVM是"),s("code",[t._v("Model-View-ViewModel")]),t._v(" 缩写，也就是把"),s("code",[t._v("MVC")]),t._v(" 中的"),s("code",[t._v("Controlller")]),t._v("演变成"),s("code",[t._v("ViewModel")]),t._v("。Model层代表数据模型，View层代表UI组件，ViewModel是View和Model层的桥梁，数据会绑定到viewModel层并自动将数据渲染到页面中，视图变化的时候会通知viewModel层更新数据。")]),t._v(" "),s("h3",{attrs:{id:"_2、简单说一下vue2-x响应式数据原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、简单说一下vue2-x响应式数据原理"}},[t._v("#")]),t._v(" 2、简单说一下Vue2.x响应式数据原理")]),t._v(" "),s("p",[t._v("Vue在初始化数据的时候，会使用"),s("code",[t._v("Object.defineProperty")]),t._v("重新定义data中的所有属性，当页面使用对应属性时，首先会进行依赖收集（收集当前组件的"),s("code",[t._v("watcher")]),t._v("）如果属性发生变化会通知相关依赖进行更新操作（"),s("code",[t._v("发布订阅")]),t._v("）。")]),t._v(" "),s("h3",{attrs:{id:"_3、vue3-x响应式数据原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、vue3-x响应式数据原理"}},[t._v("#")]),t._v(" 3、Vue3.x响应式数据原理")]),t._v(" "),s("p",[t._v("Vue3.x改用 "),s("code",[t._v("Proxy")]),t._v(" 替代 "),s("code",[t._v("Object.defineProperty")]),t._v("。因为 Proxy 可以直接监听对象和数据的变化，并且有多达13种拦截方法。并且作为新标准，将受到浏览器厂商重点持续的性能优化。")]),t._v(" "),s("blockquote",[s("p",[t._v("proxy 只会代理对象的第一层，那么Vue3又是怎么处理这个问题的呢？")])]),t._v(" "),s("p",[t._v("判断当前 Reflect.get 的返回值是否为 Object， 如果是则再通过 "),s("code",[t._v("reactive")]),t._v(" 方法做代理，这样就实现了深度观测。")]),t._v(" "),s("blockquote",[s("p",[t._v("监测数组的时候可能触发多次 get/set，那么如何防止触发多次呢？")])]),t._v(" "),s("p",[t._v("我们可以判断key是否为当前被代理对象 target 自身属性，也可以判断旧值与新值是否相等，只有满足以上两个条件之一时，才有可能只需 trigger")]),t._v(" "),s("h3",{attrs:{id:"_4、vue2-x中如何检测数组变化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、vue2-x中如何检测数组变化"}},[t._v("#")]),t._v(" 4、Vue2.x中如何检测数组变化")]),t._v(" "),s("p",[t._v("使用函数劫持的方式，重写了数组的方法，Vue 将data 中的数组进行了原型链重写，指向了自己定义的数组原型方法。这样当调用数组 api 时，可以通知依赖更新。如果数组中包含着引用类型，会对数组中的引用类型再次递归进行监控。这样就实现了监测数组变化。")]),t._v(" "),s("h3",{attrs:{id:"_5、nexttick-实现原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5、nexttick-实现原理"}},[t._v("#")]),t._v(" 5、nextTick 实现原理")]),t._v(" "),s("p",[t._v("在下次 DOM 更新循环结束之后执行延迟回调。nextTick主要使用了宏任务和微任务。根据执行环境分别尝试才有")]),t._v(" "),s("ul",[s("li",[t._v("Promise")]),t._v(" "),s("li",[t._v("MutationObserver")]),t._v(" "),s("li",[t._v("setImmediate")]),t._v(" "),s("li",[t._v("如果以上都不行则采用 setTimeout")])]),t._v(" "),s("p",[t._v("定义了一个异步方法，多次调用 nextTick 会将方法存入队列中，通过这个异步方法清空当前队列。")]),t._v(" "),s("h3",{attrs:{id:"_6、-vue生命周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6、-vue生命周期"}},[t._v("#")]),t._v(" 6、 Vue生命周期")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("beforeCreate")]),t._v(" 是 new Vue 之后触发的第一个钩子，在当前阶段 data，methods，computed以及 watch 以上的数据和方法都不能被访问。")]),t._v(" "),s("li",[s("code",[t._v("created")]),t._v(" 在实例创建完成后发生，当前阶段已经完成了数据观测，也就是可以使用数据，更改数据，在这里更改数据不会触发 updated 函数。可以做一些初始数据的获取，在当前阶段无法与 Dom 交互，如果非想要，可以通过 vm.$nextTick 来访问 Dom。")]),t._v(" "),s("li",[s("code",[t._v("beforeMount")]),t._v(" 发生在挂载之前，在这之前template模板已导入渲染函数编译。而当前阶段虚拟 Dom 已经创建完成，即将开始渲染。在此时也可以对数据进行更改，不会触发 updeted。")]),t._v(" "),s("li",[s("code",[t._v("mounted")]),t._v(" 在挂载完成后发生，在当前阶段，真实的 Dom 挂载完毕，数据完成双向绑定，可以访问到 Dom 节点，使用 $ref 属性对 Dom 进行操作。")]),t._v(" "),s("li",[s("code",[t._v("beforeUpdate")]),t._v(" 发生在更新之前，也就是响应式数据发生更新，虚拟dom 重新渲染之前被触发，你可以在当前阶段进行更改数据，不会造成重渲染。")]),t._v(" "),s("li",[s("code",[t._v("updated")]),t._v(" 发生在更新完成之后，当前阶段组件 Dom 已完成更新。需要注意的是避免在此期间更改数据，因为这可能会导致无线循环的更新。")]),t._v(" "),s("li",[s("code",[t._v("beforeDestory")]),t._v(" 发生在实例销毁之前，在当前阶段实例完全可以被使用，我们可以在这时进行善后收尾工作，比如清除定时器。")]),t._v(" "),s("li",[s("code",[t._v("destoryed")]),t._v(" 发生在实例销毁之后，这个时候只剩下了 dom 空壳，组件已被拆解，数据绑定被卸除，监听被移出，子实例也统统被销毁。")])]),t._v(" "),s("h3",{attrs:{id:"_7、接口请求一般放在哪个声明周期中"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7、接口请求一般放在哪个声明周期中"}},[t._v("#")]),t._v(" 7、接口请求一般放在哪个声明周期中")]),t._v(" "),s("p",[t._v("接口请求一般放在 "),s("code",[t._v("mounted")]),t._v(" 中，但需要注意的是服务端渲染时不支持 mounted，需要放到 "),s("code",[t._v("created")]),t._v(" 中。")]),t._v(" "),s("p",[t._v("vue是数据驱动的(只关心data即可)，换句话说，就是，"),s("strong",[t._v("只要我能操作到 data中的数据即可")]),t._v("。created时，data中的数据已经通过 Object.defineProperty 方法劫持、添加观察者模式。此时的数据已经支持双向绑定。从生命周期来看，created会在mounted之前调用，如果接口响应数据时间相同的话，放在created中， 能更快的获取并渲染视图，体验会更好~")]),t._v(" "),s("h3",{attrs:{id:"_8、-computed-和-watch"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8、-computed-和-watch"}},[t._v("#")]),t._v(" 8、 Computed 和 watch")]),t._v(" "),s("p",[s("code",[t._v("Computed")]),t._v(" 本质是一个具备缓存的 "),s("code",[t._v("watcher")]),t._v(",依赖属性发生变化就会更新视图。适用于计算比较消耗性能的计算场景。当表达式过于复杂时，在模板中放入过多逻辑会让模板难以维护，可以将复杂的逻辑放入计算属性中处理。")]),t._v(" "),s("p",[s("code",[t._v("watch")]),t._v(" 没有缓存性，更多的是观察的作用。可以监听某些数据执行回调。当我们需要深度监听对象中的属性时，可以打开 "),s("code",[t._v("deep: true")]),t._v(" 选项，这样便会对对象中的每一项进行监听。这样会带来性能问题，优化的话，可以使用 "),s("code",[t._v("字符串形式")]),t._v(" 监听，如果没有写到组建中，不要忘记 "),s("code",[t._v("watch 手动注销")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果我们使用下面这样的方式写 watch，那么就要手动注销了，这种注销其实也很简单")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" unWatch "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("$watch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("newVal"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldVal")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("newVal"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v(" : ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("oldVal"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n \n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("unWatch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 手动注销watch")]),t._v("\n")])])]),s("h3",{attrs:{id:"_9、v-if-和-v-show的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9、v-if-和-v-show的区别"}},[t._v("#")]),t._v(" 9、v-if 和 v-show的区别")]),t._v(" "),s("p",[t._v("当条件不成立时，"),s("code",[t._v("v-if")]),t._v(" 不会渲染 DOM 元素， "),s("code",[t._v("v-show")]),t._v(" 操作的是样式 （display）,切换当前DOM的显示与隐藏。")]),t._v(" "),s("h3",{attrs:{id:"_10、组件中的-data-为什么是一个函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_10、组件中的-data-为什么是一个函数"}},[t._v("#")]),t._v(" 10、组件中的 data 为什么是一个函数？")]),t._v(" "),s("p",[t._v("一个组件被重复调用多次的话，就会创建多个实例。本质上，"),s("code",[t._v("这些实例用的都是同一个构造函数")]),t._v("。如果 data 是对象的话，对象属于引用类型，会影响到所有的实例。所以为了保证组件不同的实例之间 data 不冲突，data 必须是一个函数。")]),t._v(" "),s("h3",{attrs:{id:"_11、-v-model-的原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_11、-v-model-的原理"}},[t._v("#")]),t._v(" 11、 v-model 的原理")]),t._v(" "),s("p",[s("code",[t._v("v-model")]),t._v(" 本质就是一个语法糖，可以看成是 "),s("code",[t._v("vue + input")]),t._v(" 方法的语法糖。可以通过 model 属性的 "),s("code",[t._v("prop")]),t._v(" 和 "),s("code",[t._v("event")]),t._v(" 属性来进行自定义。原生 v-model 会根据标签的不同生成不同的事件和属性")]),t._v(" "),s("h3",{attrs:{id:"_12、-vue-事件绑定原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_12、-vue-事件绑定原理"}},[t._v("#")]),t._v(" 12、 Vue 事件绑定原理")]),t._v(" "),s("p",[t._v("原生事件绑定是通过 "),s("code",[t._v("addEventListener")]),t._v(" 绑定给真实元素的。组件事件绑定是通过 Vue 自定义的 "),s("code",[t._v("$on")]),t._v(" 实现 的。")]),t._v(" "),s("h3",{attrs:{id:"_13、vue-模板编译原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_13、vue-模板编译原理"}},[t._v("#")]),t._v(" 13、Vue 模板编译原理")]),t._v(" "),s("p",[t._v("简单说，Vue的编译过程就是将 "),s("code",[t._v("template")]),t._v(" 转化为 "),s("code",[t._v("render")]),t._v(" 函数的过程。会经历以下阶段：")]),t._v(" "),s("ul",[s("li",[t._v("生成AST树")]),t._v(" "),s("li",[t._v("优化")]),t._v(" "),s("li",[t._v("codegen")])]),t._v(" "),s("p",[t._v("首先解析模板，生成 "),s("code",[t._v("AST语法树")]),t._v("（一种用 JavaScript对象的形式来描绘整个模板）。使用大量的正则表达式对模板进行解析，遇到标签、文本的时候都会执行对应的钩子进行相关处理。")]),t._v(" "),s("p",[t._v("Vue的数据是响应式的，但其实模板中并不是所有的数据都是响应式的。有一些数据首次渲染后就不会再变化，对应的 DOM也不会变化。那么优化过程就是深度遍历 AST树，按照相关条件对树节点进行标记。这些被标记的节点（静态节点）我们就可以 "),s("code",[t._v("跳过对它们的比对")]),t._v("，对运行时的模板起到很大的优化作用。")]),t._v(" "),s("p",[t._v("编译的最后一步是 "),s("code",[t._v("将优化后的 AST树转换为可执行的代码")])]),t._v(" "),s("h3",{attrs:{id:"_14、-vue2-x和vue3-x-渲染器的diff算法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_14、-vue2-x和vue3-x-渲染器的diff算法"}},[t._v("#")]),t._v(" 14、 Vue2.x和Vue3.x 渲染器的diff算法")]),t._v(" "),s("p",[t._v("简单来说，diff算法有一下过程，")]),t._v(" "),s("ul",[s("li",[t._v("同级比较，再比较子节点")]),t._v(" "),s("li",[t._v("先判断一方有子节点一方没有子节点的情况。（如果新的children没有子节点，将旧的子节点移除）")]),t._v(" "),s("li",[t._v("比较都有子节点的情况（核心diff）")]),t._v(" "),s("li",[t._v("递归比较子节点")])]),t._v(" "),s("p",[t._v("正常 diff 两个树的时间复杂度是 "),s("code",[t._v("O(n^3")]),t._v(" ，但实际情况下，我们很少会进行 "),s("code",[t._v("跨层级的移动DOM")]),t._v("，所以 Vue 将 diff 进行了优化，从 "),s("code",[t._v("O(n^3) -> O(n)")]),t._v("，只有当新旧 children 都为多个子节点时才需要用核心的 Diff 算法进行同层级比较。")]),t._v(" "),s("p",[t._v("Vue2的核心Diff 算法采用了"),s("code",[t._v("双端比较")]),t._v("的算法，同时从新旧childrend的两端开始比较，借助 key 值找到可复用的节点，再进行相关操作。相比 React 的Diff 算法，同样情况下可以减少移动节点的次数，减少不必要的性能损耗，更加的优雅。")]),t._v(" "),s("p",[t._v("Vue3.x 借鉴了 ivi 算法 和 inferno 算法。在创建 VNode 时就确定其类型，以及在 "),s("code",[t._v("mount/patch")]),t._v(" 的过程中采用 "),s("code",[t._v("位运算")]),t._v(" 来判断一个 VNode 的类型，在这个基础上再配合核心的 Diff 算法，使得性能上较Vue2.x有了提升。（实际的实现可以结合 Vue3.x 源码看。）")]),t._v(" "),s("p",[t._v("该算法中还运用了 "),s("code",[t._v("动态规划")]),t._v(" 的思想求解最长递归子序列。")]),t._v(" "),s("h3",{attrs:{id:"_15、-虚拟dom以及key属性的作用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_15、-虚拟dom以及key属性的作用"}},[t._v("#")]),t._v(" 15、 虚拟Dom以及key属性的作用")]),t._v(" "),s("p",[t._v("由于在浏览器中才做DOM是很昂贵的。频繁的操作DOM。会产生一定的性能问题。这就是虚拟DOM产生的原因")]),t._v(" "),s("p",[t._v("Vue2的 虚拟dom(Virtual DOM) 借鉴了开源库 "),s("code",[t._v("snabbdom")]),t._v(" 实现")]),t._v(" "),s("p",[s("code",[t._v("Virtual DOM 本质就是用一个原生的JS对象去描述一个 DOM 节点。是对真实 DOM的一层抽象。")]),t._v("（也就是源码中的 VNode类，它定义在 "),s("code",[t._v("src/core/vdom/vnode.js")]),t._v(" 中）")]),t._v(" "),s("p",[t._v("Virtual DOM 映射到真实 DOM 要经历 VNode 的 create，diff，patch等阶段、")]),t._v(" "),s("p",[s("b",[t._v("[ key 的作用是尽可能的复用 DOM 元素。]")])]),t._v(" "),s("p",[t._v("新旧 children 中的节点只有顺序是不同的时候，最佳的操作应该是通过移动元素的位置来达到更新的目的。")]),t._v(" "),s("p",[t._v("需要在新旧 children 中的节点只有顺序是不同的时候，最佳的操作应该是通过移动元素的位置来达到更新的目的。")]),t._v(" "),s("p",[t._v("需要在新旧 children 的节点中保存映射关系，以便能够在旧 children 的节点中找到可复用的节点。key也就是 children 中节点的唯一标识。")]),t._v(" "),s("h3",{attrs:{id:"_16、keep-alive"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_16、keep-alive"}},[t._v("#")]),t._v(" 16、keep-alive")]),t._v(" "),s("p",[s("code",[t._v("keep-alive")]),t._v(" 可以实现组件缓存，当组件切换时不会对当前组件进行卸载。")]),t._v(" "),s("p",[t._v("常用的两个属性 "),s("code",[t._v("include/exclude")]),t._v("， 允许组件有条件的进行缓存。")]),t._v(" "),s("p",[t._v("两个生命周期 "),s("code",[t._v("activated/deactivated")]),t._v("， 用来得知当前组件是否处于活跃状态。")]),t._v(" "),s("p",[t._v("keep-alive 中还运用了"),s("code",[t._v("LRU（least recently used）")]),t._v("算法。")]),t._v(" "),s("h3",{attrs:{id:"_17、vue-中组件生命周期调用顺序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_17、vue-中组件生命周期调用顺序"}},[t._v("#")]),t._v(" 17、Vue 中组件生命周期调用顺序")]),t._v(" "),s("p",[t._v("组件的调用顺序都是 "),s("code",[t._v("先父后子")]),t._v("，渲染完成的顺序是 "),s("code",[t._v("先子后父")]),t._v("。")]),t._v(" "),s("p",[t._v("组件的销毁操作是 "),s("code",[t._v("先父后子")]),t._v("，销毁完成的顺序是 "),s("code",[t._v("先子后父")]),t._v("。")]),t._v(" "),s("h4",{attrs:{id:"加载渲染过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加载渲染过程"}},[t._v("#")]),t._v(" 加载渲染过程")]),t._v(" "),s("blockquote",[s("p",[t._v("父beforeCreate -> 父created -> 父 beforeMount -> 子 beforeCreate -> 子 created -> 子beforeMount -> 子 mounted -> 父 mounted")])]),t._v(" "),s("h4",{attrs:{id:"子组件更新过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#子组件更新过程"}},[t._v("#")]),t._v(" 子组件更新过程")]),t._v(" "),s("blockquote",[s("p",[t._v("父beforeUpdate -> 子beforeUpdate -> 子updeted -> 父updated")])]),t._v(" "),s("h4",{attrs:{id:"父组件更新过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#父组件更新过程"}},[t._v("#")]),t._v(" 父组件更新过程")]),t._v(" "),s("blockquote",[s("p",[t._v("父 beforeUpdate -> 父 updated")])]),t._v(" "),s("h4",{attrs:{id:"销毁过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#销毁过程"}},[t._v("#")]),t._v(" 销毁过程")]),t._v(" "),s("blockquote",[s("p",[t._v("父 beforeDestory -> 子 beforeDestory -> 子 destroyed -> 父 destoryed")])]),t._v(" "),s("h3",{attrs:{id:"_18、vue2-x-组件通信有哪些方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_18、vue2-x-组件通信有哪些方式"}},[t._v("#")]),t._v(" 18、Vue2.x 组件通信有哪些方式？")]),t._v(" "),s("ul",[s("li",[t._v("父子组件通信")])]),t._v(" "),s("p",[t._v("父 -> 子 "),s("code",[t._v("props")])]),t._v(" "),s("p",[t._v("子 -> 父 "),s("code",[t._v("$on、$emit")])]),t._v(" "),s("p",[t._v("获取父子组件实例 "),s("code",[t._v("$parent、$children")])]),t._v(" "),s("p",[s("code",[t._v("Ref")]),t._v(" 获取实例的方式调用组件的属性或者方法")]),t._v(" "),s("p",[s("code",[t._v("Provide、inject")]),t._v(" 官方不推荐使用，但是写组件库时常用")]),t._v(" "),s("ul",[s("li",[t._v("兄弟组件通信")])]),t._v(" "),s("p",[s("code",[t._v("Event Bus")]),t._v(" 实现跨组件通信 "),s("code",[t._v("Vue.prototype.$bus = new Vue")])]),t._v(" "),s("p",[s("code",[t._v("Vuex")])]),t._v(" "),s("ul",[s("li",[t._v("跨级组件通信")])]),t._v(" "),s("p",[s("code",[t._v("Vuex")])]),t._v(" "),s("p",[s("code",[t._v("$attrs、 $listeners")])]),t._v(" "),s("p",[s("code",[t._v("Provide、inject")])]),t._v(" "),s("h3",{attrs:{id:"_19-什么是-ssr"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_19-什么是-ssr"}},[t._v("#")]),t._v(" 19 什么是 SSR")]),t._v(" "),s("p",[t._v("SSR也就是服务端渲染，"),s("code",[t._v("也就是将 Vue在客户端把标签渲染成 HTML的工作放在服务端完成，然后再把 html 直接返回给客户端")])]),t._v(" "),s("p",[t._v("SSR 有着更好的 SEO、并且首屏加载速度更快等优点，不过它也有一些缺点，比如我们的开发条件会收到限值，服务器端渲染只支持 "),s("code",[t._v("beforeCreate")]),t._v(" 和 "),s("code",[t._v("created")]),t._v(" 两个钩子，当我们需要一些外部拓展库时需要特殊处理，服务端渲染应用程序也需要处于 node 的运行环境，还有就是服务器会有更大的负载需求。")]),t._v(" "),s("h3",{attrs:{id:"_20-做过哪些-vue的性能优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_20-做过哪些-vue的性能优化"}},[t._v("#")]),t._v(" 20 做过哪些 Vue的性能优化？")]),t._v(" "),s("h4",{attrs:{id:"编码阶段"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#编码阶段"}},[t._v("#")]),t._v(" 编码阶段")]),t._v(" "),s("ul",[s("li",[t._v("尽量减少 data 中的数据，data 中的数据都会增加 getter 和 setter ，会收集对应的 watcher")]),t._v(" "),s("li",[t._v("v-if 和 v-for 不能连用")]),t._v(" "),s("li",[t._v("如果需要使用 v-for 给每项元素绑定事件时使用事件代理")]),t._v(" "),s("li",[t._v("SPA 页面采用 keep-alive 缓存组件")]),t._v(" "),s("li",[t._v("在更多的情况下，使用 v-fi 替代 v-show")]),t._v(" "),s("li",[t._v("key 保证唯一")]),t._v(" "),s("li",[t._v("使用路由懒加载，异步组件")]),t._v(" "),s("li",[t._v("防抖，节流")]),t._v(" "),s("li",[t._v("第三方模块按需导入")]),t._v(" "),s("li",[t._v("长列表滚动到可视区域动态加载")]),t._v(" "),s("li",[t._v("图片懒加载")])]),t._v(" "),s("h4",{attrs:{id:"seo-优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#seo-优化"}},[t._v("#")]),t._v(" SEO 优化")]),t._v(" "),s("ul",[s("li",[t._v("预渲染")]),t._v(" "),s("li",[t._v("服务端渲染 SSR")])]),t._v(" "),s("h4",{attrs:{id:"打包优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#打包优化"}},[t._v("#")]),t._v(" 打包优化")]),t._v(" "),s("ul",[s("li",[t._v("压缩代码")]),t._v(" "),s("li",[t._v("Tree shaking/scope Hoisting")]),t._v(" "),s("li",[t._v("使用 cdn 加载第三方模块")]),t._v(" "),s("li",[t._v("多线程打包 happypack")]),t._v(" "),s("li",[t._v("splitChunks 抽离公共文件")]),t._v(" "),s("li",[t._v("sourceMap 优化")])]),t._v(" "),s("h4",{attrs:{id:"用户体验"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#用户体验"}},[t._v("#")]),t._v(" 用户体验")]),t._v(" "),s("ul",[s("li",[t._v("骨架屏")]),t._v(" "),s("li",[t._v("PWA")])]),t._v(" "),s("p",[t._v("还可以使用缓存（客户端缓存、服务端缓存）优化、服务端开启gzip 压缩等。")]),t._v(" "),s("h3",{attrs:{id:"_21、-hash-路由和-history-路由实现原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_21、-hash-路由和-history-路由实现原理"}},[t._v("#")]),t._v(" 21、 hash 路由和 history 路由实现原理")]),t._v(" "),s("p",[s("code",[t._v("location.hash")]),t._v(" 的值实际就是 URL中 "),s("code",[t._v("#")]),t._v(" 后面的东西")]),t._v(" "),s("p",[t._v("history 实际采用了 HTML5 中提供的API来实现。主要有 "),s("code",[t._v("history.pushState()")]),t._v(" 和 "),s("code",[t._v("history.replaceState()")])]),t._v(" "),s("h3",{attrs:{id:"_22、vue3-0-性能提升主要是通过哪几方面体现的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_22、vue3-0-性能提升主要是通过哪几方面体现的"}},[t._v("#")]),t._v(" 22、Vue3.0 性能提升主要是通过哪几方面体现的？")]),t._v(" "),s("h4",{attrs:{id:"_1、响应式系统提升"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、响应式系统提升"}},[t._v("#")]),t._v(" 1、响应式系统提升")]),t._v(" "),s("p",[t._v("vue2在初始化的时候，对data中的每个属性都使用 definepropery 调用 getter 和 setter 使之变为响应式对象。如果属性值为对象，还会递归调用 defineproperty 使之变为响应式对象。")]),t._v(" "),s("p",[t._v("vue3 使用 proxy 对象重写响应式。proxy 的性能本来比 defineproperty好，proxy可以拦截属性的访问、赋值、删除等操作，不需要初始化的时候遍历所有属性，另外有多层属性嵌套的话，只有访问某个属性的时候，才回递归处理下一级的属性。")]),t._v(" "),s("p",[s("strong",[t._v("优势：")])]),t._v(" "),s("ul",[s("li",[t._v("可以监听动态新增的属性；")]),t._v(" "),s("li",[t._v("可以监听删除的属性；")]),t._v(" "),s("li",[t._v("可以监听数组的索引和length属性；")])]),t._v(" "),s("h4",{attrs:{id:"_2、编译优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、编译优化"}},[t._v("#")]),t._v(" 2、编译优化")]),t._v(" "),s("p",[t._v("优化编译和重写虚拟dom，让首次渲染和更新dom性能有更大的提升vue2通过标记静态根节点，优化diff 算法vue3标记和提升所有静态根节点，diff的时候只比较动态节点内容。")]),t._v(" "),s("p",[t._v("模板里面不用创建唯一根节点，可以直接放同级标签和文本内容")]),t._v(" "),s("p",[s("strong",[t._v("静态提升")])]),t._v(" "),s("p",[t._v("patch flag,跳过静态节点，直接对比动态节点，缓存事件处理函数。")]),t._v(" "),s("h4",{attrs:{id:"_3、-源码体积的优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、-源码体积的优化"}},[t._v("#")]),t._v(" 3、 源码体积的优化")]),t._v(" "),s("p",[t._v("vue3 移除了一些不常用的api，例如：inline-tempalte、filter等 使用 tree-shaking")]),t._v(" "),s("h3",{attrs:{id:"_23、composition-api-与vue2-x使用的-options-api-有什么区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_23、composition-api-与vue2-x使用的-options-api-有什么区别"}},[t._v("#")]),t._v(" 23、Composition API 与vue2.x使用的 options Api 有什么区别？")]),t._v(" "),s("p",[s("strong",[t._v("options API")])]),t._v(" "),s("p",[t._v("包含一个描述组件选项（data、methods、props等）的对象 options；")]),t._v(" "),s("p",[t._v("API 开发复杂组件，同一个功能逻辑的代码被拆分到不同选项；")]),t._v(" "),s("p",[t._v("使用mixin 用公共代码，也有问题：命名冲突，数据来源不清晰")]),t._v(" "),s("p",[s("strong",[t._v("composition Api")])]),t._v(" "),s("p",[t._v("vue3 新增的一组api, 他是基于函数的api，可以更灵活的组织组件的逻辑，")]),t._v(" "),s("p",[t._v("解决 options api 在大型项目中，options api 不好拆分和重用的问题")]),t._v(" "),s("h3",{attrs:{id:"_24、proxy-相对于-object-defineproperty-有哪些优点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_24、proxy-相对于-object-defineproperty-有哪些优点"}},[t._v("#")]),t._v(" 24、proxy 相对于 Object.defineproperty 有哪些优点")]),t._v(" "),s("p",[t._v("proxy的性能本来比 defineproperty好，proxy可以拦截属性的访问、赋值、删除等操作，不需要初始化的时候遍历所有属性，另外有多层属性嵌套，只有访问某个属性的时候，才会递归处理下一级的属性。")]),t._v(" "),s("ul",[s("li",[t._v("可以监听数组变化")]),t._v(" "),s("li",[t._v("可以劫持整个对象")]),t._v(" "),s("li",[t._v("操作时不时对原对象操作，是 new proxy 返回的一个新对象")]),t._v(" "),s("li",[t._v("可以劫持的操作有13种")])]),t._v(" "),s("h3",{attrs:{id:"_25、vue3-0-在编译方面有哪些优化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_25、vue3-0-在编译方面有哪些优化"}},[t._v("#")]),t._v(" 25、vue3.0 在编译方面有哪些优化？")]),t._v(" "),s("p",[t._v("vue.js 3.x 中标记和提升所有静态节点，diff 的时候只需要对比动态节点内容：")]),t._v(" "),s("h4",{attrs:{id:"fragments-升级vetur插件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#fragments-升级vetur插件"}},[t._v("#")]),t._v(" Fragments（升级vetur插件):")]),t._v(" "),s("p",[t._v("template中不需要唯一根节点，可以直接放文本或者同级标签")]),t._v(" "),s("p",[t._v("静态提升（hoistStatic），当使用 hoistStatic 时，所有静态的节点都被提升到 "),s("code",[t._v("render")]),t._v(" 方法之外，只会在应用启动的时候被创建一次，之后使用只需要应用提取的静态节点，跟随每次渲染被不停的复用。")]),t._v(" "),s("p",[t._v("patch flag， 在动态标签末尾加上相应的标记，只能带 patchFlag 的节点才被认为是动态的元素，会被追踪属性的修改，能快速的找到动态节点，而不用逐个逐层遍历。提高了虚拟dom diff 的性能。")]),t._v(" "),s("p",[t._v("缓存事件处理函数 cacheHandler，避免每次触发都要重新生成全新的 function 去更新之前的函数 tree shaking 通过摇树优化核心库体积，减少不必要的代码量")]),t._v(" "),s("blockquote",[s("p",[t._v("Tree Shaking 在 Webpack 中的实现，是用来尽可能的删除没有被使用过的代码，一些被 "),s("code",[t._v("import")]),t._v(" 了但其实没有被使用的代码。")])]),t._v(" "),s("h3",{attrs:{id:"_26、vue-js3-0-响应式系统的实现原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_26、vue-js3-0-响应式系统的实现原理"}},[t._v("#")]),t._v(" 26、Vue.js3.0 响应式系统的实现原理？")]),t._v(" "),s("h4",{attrs:{id:"_1、reactive"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、reactive"}},[t._v("#")]),t._v(" 1、reactive：")]),t._v(" "),s("ul",[s("li",[t._v("设置对象为响应式对象。接收一个参数，判断这个参数是否是对象。不是对象则直接返回这个参数，不做响应式处理。")]),t._v(" "),s("li",[t._v("创建拦截器对象 handerler 设置 get，set，deleteProperty\n"),s("ul",[s("li",[t._v("get\n"),s("ul",[s("li",[t._v("收集依赖（track）")]),t._v(" "),s("li",[t._v("返回当前key的值\n"),s("ul",[s("li",[t._v("如果当前key的值是对象，则为当前key的对象拦截器 handler 设置 get/set/deleteProperty")]),t._v(" "),s("li",[t._v("如果当前的key 的值不是对象，则返回当前 key 的值")])])])])]),t._v(" "),s("li",[t._v("set\n"),s("ul",[s("li",[t._v("设置新值和老值不相等时，更新为新值，并触发更新（trigger）")])])]),t._v(" "),s("li",[t._v("deleteProperty\n"),s("ul",[s("li",[t._v("当前对象有这个key的时候，删除这个 key 并触发更新 （trigger）")])])])])]),t._v(" "),s("li",[t._v("返回 Proxy 对象")])]),t._v(" "),s("h4",{attrs:{id:"_2、effect-接收一个函数作为参数-作用是-访问响应式对象属性时去收集依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、effect-接收一个函数作为参数-作用是-访问响应式对象属性时去收集依赖"}},[t._v("#")]),t._v(" 2、effect：接收一个函数作为参数，作用是：访问响应式对象属性时去收集依赖")]),t._v(" "),s("h4",{attrs:{id:"_3、track"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、track"}},[t._v("#")]),t._v(" 3、track：")]),t._v(" "),s("ul",[s("li",[t._v("接收两个参数 target 和 key")]),t._v(" "),s("li",[t._v("如果没有 activeEffect，则说明没有创建 effect 依赖")]),t._v(" "),s("li",[t._v("如果有 activeEffect，则去判断 WeakMap 集合中是否有 target 属性。\n"),s("ul",[s("li",[t._v("WeakMap 集合中没有 target 属性，则 set（target，（depsMap = new Map()））")]),t._v(" "),s("li",[t._v("WeakMap 集合中有 target 属性，则判断 target 属性的 map 值的 depsMap 中是否有 key 属性\n"),s("ul",[s("li",[t._v("depsMap 中没有 key 属性，则 set(key, (dep = new Set()))")]),t._v(" "),s("li",[t._v("depsMap 中有 key 属性，则添加这个 activeEffect")])])])])])]),t._v(" "),s("h4",{attrs:{id:"_4、trigger"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、trigger"}},[t._v("#")]),t._v(" 4、trigger：")]),t._v(" "),s("ul",[s("li",[t._v("判断 WeakMap 中是否有 target 属性\n"),s("ul",[s("li",[t._v("WeakMap 中没有 target 属性，则没有 target 相应的依赖")]),t._v(" "),s("li",[t._v("WeakMap 中有 target 属性，则判断 target 属性的 map 值中是否有 key 属性，有的话循环触发收集的 effect()")])])])]),t._v(" "),s("p",[t._v("具体代码如下：")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("isObject")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("val")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" val "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" val "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'object'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("convert")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("target")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isObject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" target\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hasOwnProperty "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hasOwnProperty\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("hasOwn")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasOwnProperty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reactive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("target")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isObject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" target\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" handler "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" receiver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 收集依赖")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("track")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Reflect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" receiver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("convert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" receiver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" oldValue "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Reflect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" receiver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("oldValue "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Reflect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" receiver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 触发更新")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("trigger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("deleteProperty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hadKey "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasOwn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Reflect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("deleteProperty")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("hadKey "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 触发更新")]),t._v("\n        console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'delete'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("trigger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Proxy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" handler"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" activeEffect "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("effect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  activeEffect "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" callback\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 访问响应式对象属性，去收集依赖")]),t._v("\n  activeEffect "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" targetMap "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WeakMap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("track")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("activeEffect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" depsMap "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" targetMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("depsMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    targetMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("depsMap "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" dep "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" depsMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("dep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    depsMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dep "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  dep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("activeEffect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("trigger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" depsMap "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" targetMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("depsMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dep "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" depsMap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    dep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("effect")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("effect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("raw")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 判断 raw 是否是 ref 创建的对象，如果是的话直接返回")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isObject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("raw"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" raw"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("__v_isRef"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("convert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("raw"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" r "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    __v_isRef"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("track")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("r"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'value'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" value\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("newValue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("newValue "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        raw "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("convert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("raw"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("trigger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("r"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'value'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" r\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toRefs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("proxy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ret "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" proxy "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Array")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Array")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" key "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    ret"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toProxyRef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" ret\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toProxyRef")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" r "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    __v_isRef"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("newValue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      proxy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newValue\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" r\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("computed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("getter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ref")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("effect")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);